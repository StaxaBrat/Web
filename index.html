<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöÇ RailTech | –°–ø–∏—Å–æ–∫ —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫—ñ–≤üìã</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            text-align: center;
        }

        table {
            width: 50%;
            margin: 20px auto;
            border-collapse: collapse;
        }

        th, td {
            border: 1px solid black;
            padding: 10px;
        }

        button {
            padding: 5px 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>üöÇ RailTech | –°–ø–∏—Å–æ–∫ —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫—ñ–≤üìã</h1>
    <table>
        <tr>
            <th>–Ü–º'—è</th>
            <th>–°—Ç–∞—Ç—É—Å</th>
            <th>–î—ñ—è</th>
        </tr>
        {% for employee in employees %}
        <tr>
            <td>{{ employee.username }}</td>
            <td>{{ employee.status }}</td>
            <td>
                <button onclick="updateStatus('{{ employee.username }}', '–ù–∞ —Ä–æ–±–æ—Ç—ñ')">‚úÖ–ù–∞ —Ä–æ–±–æ—Ç—ñ</button>
                <button onclick="updateStatus('{{ employee.username }}', '–í—ñ–¥–ø–æ—á–∏–≤–∞—î')">üí§–í—ñ–¥–ø–æ—á–∏–≤–∞—î</button>
                <button onclick="updateStatus('{{ employee.username }}', '–ù–µ –Ω–∞ —Ä–æ–±–æ—Ç—ñ')">‚ùå–ù–µ –Ω–∞ —Ä–æ–±–æ—Ç—ñ</button>
            </td>
        </tr>
        {% endfor %}
    </table>

    <h2>‚ûï –î–æ–¥–∞—Ç–∏ –Ω–æ–≤–æ–≥–æ —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫–∞</h2>
    <input type="text" id="new_employee" placeholder="–Ü–º'—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞">
    <button onclick="addEmployee()">–î–æ–¥–∞—Ç–∏</button>

    <script>
        function updateStatus(username, status) {
            fetch('/update_status', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ username: username, status: status })
            }).then(response => response.json())
                .then(data => location.reload());
        }

        function addEmployee() {
            let username = document.getElementById("new_employee").value;
            if (username) {
                fetch('/add_employee', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ username: username })
                }).then(response => response.json())
                    .then(data => location.reload());
            }
        }
    </script>
</body>
</html>
